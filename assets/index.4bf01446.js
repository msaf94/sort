var A=Object.defineProperty;var x=(t,e,n)=>e in t?A(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var h=(t,e,n)=>(x(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerpolicy&&(r.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?r.credentials="include":o.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(o){if(o.ep)return;o.ep=!0;const r=n(o);fetch(o.href,r)}})();const g=100;class z{constructor(e){h(this,"getShuffledArray",e=>{const n=Array(e).fill(void 0).map((r,a)=>a+1),i=[],o=[];for(let r=0;r<this.size;r++){let a=null;for(;a===null||i.includes(a);)a=this.getRandomNumber(0,this.size-1);i.push(a),o[r]=n[a]}return o});h(this,"setArray",e=>{this.size=e!=null?e:g,this.array=this.getShuffledArray(this.size)});h(this,"getArray",()=>this.array);this.setArray(e!=null?e:g)}getRandomNumber(e=0,n){return Math.round(Math.random()*(e+(n-e)))}}const c={height:500,indent:20},N=new z,s={arraySizeForm:"array-size",canvas:"canvas",controls:"controls",wrapper:"wrapper"},m={default:"#ff0000",info:"#0000ff",success:"#00ff00"},L=new URLSearchParams(window.location.search).get("debug")==="true";function l(){return{canvas:document.getElementById(s.canvas),controls:document.getElementById(s.controls),wrapper:document.getElementById(s.wrapper)}}const{getArray:T}=N;function u(){const t=T();return{array:t,size:t.length}}function w(){const{canvas:t}=l(),{size:e}=u(),n=t.getContext("2d");return{columnWidth:t.width/e/2,context:n,heightMultiplier:c.height/e}}function v(t){const{columnWidth:e,heightMultiplier:n}=w(),{array:i,size:o}=u(),r=i[t],a=t*e+t*e+t*e/(o-1);return{currentHeight:r*n,currentIndent:a,item:r}}function E(t,e){const{columnWidth:n,context:i,heightMultiplier:o}=w(),{currentHeight:r,currentIndent:a,item:d}=v(t),f=e?m.success:m.default,{array:I}=u();i.fillStyle=f,i.fillRect(a,c.height-r,n,d*o),L&&(t===0||t===I.length-1)&&(i.fillStyle=m.info,i.fillText(`${d}`,a,20))}function S(t=!1){const{array:e}=u();e.forEach((n,i)=>E(i,t))}function P(t,e){return t<e}function M(t){const{columnWidth:e,context:n}=w();function i({currentIndent:o}){const r=e/2;n.clearRect(-r+o,0,e+r*2,c.height)}t.forEach(o=>{i(v(o))})}function W(t){t.forEach(e=>E(e,!1))}let p;function b(){window.clearTimeout(p);const{array:t}=u();(async()=>{for(let e=0;e<t.length;e++){const n=e+1,i=t[n];if(i===void 0){S(!0);break}const r=e,a=t[r];if(!P(a,i)){t[n]=a,t[r]=i,await new Promise(d=>{p=setTimeout(()=>{const f=[n,r];M(f),W(f),d()})}),b();break}}})()}function k(){b()}function B(){const t=document.createElement("main");t.id=s.wrapper,t.style.padding=`${c.indent}px`,t.style.height=`${c.height+c.indent*2}px`,document.body.appendChild(t)}function D(){const t=document.createElement("canvas"),{wrapper:e}=l();t.id=s.canvas,t.width=window.innerWidth-c.indent*2,t.height=c.height,e&&e.appendChild(t)}function O(){const{wrapper:t}=l(),e=document.createElement("div");e.id=s.controls;const n=document.createElement("button");n.textContent="Sort",n.onclick=k,e.appendChild(n),t&&t.appendChild(e)}function R(){const t=document.createElement("form"),e=document.createElement("input"),n=document.createElement("button");t.id=s.arraySizeForm,e.type="number",e.placeholder="Array size",n.textContent="Set array size",t.appendChild(e),t.appendChild(n),t.onsubmit=o=>{o.preventDefault();const r=Number(e.value);r&&(N.setArray(r),y())};const{wrapper:i}=l();i&&i.appendChild(t)}function F(){B(),D(),R(),O()}let C;function y(){const{wrapper:t}=l();window.clearTimeout(p),t&&t.replaceChildren(),F(),S()}window.addEventListener("DOMContentLoaded",()=>{y(),window.addEventListener("resize",()=>{window.clearTimeout(C),C=setTimeout(y,300)})});
